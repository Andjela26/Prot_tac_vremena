Zadatak je da u serijskom terminalu Arduino IDE okruÅ¾enja ispisujete informaciju o tekuÄ‡em vremenu u formatu HH:MM:SS. Pritiskom na taster inicira se slanje zahteva od strane NTP klijenta, nakon Äega NTP server Å¡alje paket gde su nam od interesa prva Äetiri bajta vremenskog zapisa Transmit Timestamp (tj. bajtovi 40, 41, 42 i 43). Kada se ova Äetiri bajta (u datom redosledu) spoje u promenljivu tipa unsigned long int, dobija se broj sekundi od poÄetka epohe. Neka je ova vrednost TS. PoÅ¡to je nama bitno samo vreme, ali ne i datum, potrebno je prvo izraÄunati ostatak deljenja vrednosti TS brojem sekundi u jednom danu: ğ‘ğ‘† = ğ‘‡ğ‘† % 86400
NS je vreme u tekuÄ‡em danu izraÅ¾eno u sekundama. Sate, minute i sekunde izraÄunavamo na sledeÄ‡i naÄin: ğ»ğ» = ğ‘ğ‘† / 3600 ğ‘€ğ‘€ = ğ‘ğ‘†60âˆ’60âˆ™ğ»ğ» ğ‘†ğ‘† = ğ‘ğ‘† % 60
Dodatno, potrebno je izvrÅ¡iti korekciju zbog vremenske zone, s obzirom da NTP daje vreme za zonu GMT. NaÅ¡a vremenska zona je GMT + 1, dakle, HH = (HH + 1) % 24. TakoÄ‘e, ako je broj sati, minuta ili sekundi manji od 10, Å¡tampati 0 pre odgovarajuÄ‡eg broja. Potrebno je da se sa svakim pritiskom na taster ispisuje novo trenutno vreme dobijeno od NTP servera.
